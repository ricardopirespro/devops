hosts


[wordpress]
172.17.177.40

. Nós também adicionaremos o grupo wordpress



ansible wordpress -u vagrant -i hosts -m shell -a 'echo Hello, World'



ansible wordpress -u vagrant --private-key .vagrant/machines/wordpress/virtualbox/private_key -i hosts -m shell -a 'echo Hello, World'



ansible -vvvv wordpress -u vagrant --private-key .vagrant/machines/wordpress/virtualbox/private_key -i hosts -m shell -a 'echo Hello, World'


===============
Seguem os passos:

1a) Na pasta do seu projeto (wordpress_com_ansible), crie uma nova pasta ssh-keys para guardar as chaves ssh e entre na pasta:

mkdir ssh-keys
cd ssh-keys

b) Depois gere as chaves com o comando:

ssh-keygen -t rsa



c) O comando pergunta onde você gostaria de guardar as chaves e qual será o nome da chave. Defina a pasta ssh-keys como destino e como base o nome vagrant_id_rsa, por exemplo:



/opt/vagrant-projects/trusty64/ssh-keys/vagrant_id_rsa



3) Vamos copiar a chave pública gerada para a VM. Para tal digite na pasta ssh-keys:

ssh-copy-id -i /opt/vagrant-projects/trusty64/ssh-keys/vagrant_id_rsa.pub vagrant@172.17.177.40



Obs: Talvez esteja necessário remover o arquivo ~/.ssh/known_hosts.

5) Volte para a raiz do seu projeto (na pasta wordpress_com_ansible) e tente executar o comando do Ansible:



ansible wordpress -i hosts -u vagrant --private-key /opt/vagrant-projects/trusty64/ssh-keys/vagrant_id_rsa -m ping -m shell -a 'echo Hello, World'

Agora deve mostrar:

172.17.177.40 | SUCCESS | rc=0 >>
Hello, World




https://cursos.alura.com.br/course/infraestrutura-como-codigo-com-ansible/task/46792

